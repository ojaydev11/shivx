# ============================================================================
# ShivX AI Trading System - PRODUCTION Environment Configuration
# ============================================================================
# CRITICAL: This is a PRODUCTION configuration template
# Review EVERY setting before deploying to production
# ============================================================================

# ----------------------------------------------------------------------------
# Application Configuration
# ----------------------------------------------------------------------------

# Environment - MUST be 'production'
SHIVX_ENV=production

# Application version (auto-set in CI/CD)
SHIVX_VERSION=1.0.0

# Git commit SHA (auto-set in CI/CD)
SHIVX_GIT_SHA=REPLACE_IN_CI_CD

# Development mode - MUST be false in production
SHIVX_DEV=false

# Debug mode - MUST be false in production
DEBUG=false

# Skip authentication - MUST be false in production
SKIP_AUTH=false

# ----------------------------------------------------------------------------
# Security & Authentication - CRITICAL
# ----------------------------------------------------------------------------

# Secret key for encryption (MINIMUM 32 bytes, URL-safe base64)
# Generate: python -c "import secrets; print(secrets.token_urlsafe(32))"
# CRITICAL: MUST be changed from default!
SHIVX_SECRET_KEY=REPLACE_WITH_PRODUCTION_SECRET_KEY_MINIMUM_32_BYTES

# JWT secret for API authentication (MINIMUM 32 bytes)
# Generate: python -c "import secrets; print(secrets.token_urlsafe(32))"
# CRITICAL: MUST be changed from default!
SHIVX_JWT_SECRET=REPLACE_WITH_PRODUCTION_JWT_SECRET_MINIMUM_32_BYTES

# Session timeout in seconds (default: 3600 = 1 hour for production)
SHIVX_SESSION_TIMEOUT=3600

# API key for external services
SHIVX_API_KEY=REPLACE_WITH_PRODUCTION_API_KEY

# CORS allowed origins (NO WILDCARDS in production!)
# Example: https://app.shivx.io,https://dashboard.shivx.io
SHIVX_CORS_ORIGINS=https://app.shivx.io,https://api.shivx.io

# Rate limiting (requests per minute) - production default
SHIVX_RATE_LIMIT_PER_MINUTE=100

# Maximum failed login attempts before lockout
SHIVX_MAX_LOGIN_ATTEMPTS=5

# Account lockout duration (seconds)
SHIVX_LOCKOUT_DURATION=900

# ----------------------------------------------------------------------------
# Database Configuration - Production PostgreSQL
# ----------------------------------------------------------------------------

# Database URL - MUST use PostgreSQL with SSL in production
# Format: postgresql://user:password@host:5432/database?sslmode=require
SHIVX_DATABASE_URL=postgresql://shivx:REPLACE_WITH_DB_PASSWORD@postgres:5432/shivx?sslmode=require

# Database connection pool size (adjust based on load)
SHIVX_DB_POOL_SIZE=20

# Database pool timeout (seconds)
SHIVX_DB_POOL_TIMEOUT=30

# Database SSL mode - MUST be 'require' or 'verify-full' in production
SHIVX_DB_SSL_MODE=require

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------

# Redis URL with password
SHIVX_REDIS_URL=redis://:REPLACE_WITH_REDIS_PASSWORD@redis:6379/0

# Redis password
SHIVX_REDIS_PASSWORD=REPLACE_WITH_REDIS_PASSWORD

# Redis connection timeout (seconds)
SHIVX_REDIS_TIMEOUT=5

# Redis max connections
SHIVX_REDIS_MAX_CONNECTIONS=50

# ----------------------------------------------------------------------------
# Trading Configuration - PRODUCTION CRITICAL
# ----------------------------------------------------------------------------

# Jupiter DEX API endpoint (Solana mainnet)
JUPITER_API_URL=https://quote-api.jup.ag/v6

# Solana RPC endpoint - Use paid tier for production!
# Free RPC may have rate limits and reliability issues
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com

# Trading mode - START with 'paper' for initial deployment!
# ONLY switch to 'live' after thorough testing!
SHIVX_TRADING_MODE=paper

# Maximum position size (in USD)
SHIVX_MAX_POSITION_SIZE=10000

# Stop loss percentage (0.05 = 5%)
SHIVX_STOP_LOSS_PCT=0.05

# Take profit percentage (0.15 = 15%)
SHIVX_TAKE_PROFIT_PCT=0.15

# Maximum daily loss limit (USD)
SHIVX_MAX_DAILY_LOSS=5000

# Maximum number of concurrent positions
SHIVX_MAX_POSITIONS=10

# Wallet private key - CRITICAL SECURITY
# MUST be stored in secure secret manager (AWS Secrets Manager, HashiCorp Vault)
# NEVER commit this value to version control!
SOLANA_WALLET_PRIVATE_KEY=LOAD_FROM_SECRET_MANAGER

# ----------------------------------------------------------------------------
# AI/ML Configuration
# ----------------------------------------------------------------------------

# Model checkpoint directory
SHIVX_MODEL_DIR=/app/models/checkpoints

# Enable GPU acceleration (if available)
SHIVX_USE_GPU=true

# TensorFlow log level (3=ERROR only for production)
TF_CPP_MIN_LOG_LEVEL=3

# PyTorch device (cuda if GPU available)
TORCH_DEVICE=cuda

# ML model serving endpoint
ML_SERVING_URL=http://ml-serving:8501

# Model update check interval (seconds)
SHIVX_MODEL_UPDATE_INTERVAL=3600

# ----------------------------------------------------------------------------
# Feature Flags - Production Defaults
# ----------------------------------------------------------------------------

# Enable advanced AI trading strategies
SHIVX_FEATURE_ADVANCED_TRADING=true

# Enable sentiment analysis
SHIVX_FEATURE_SENTIMENT_ANALYSIS=true

# Enable reinforcement learning
SHIVX_FEATURE_RL_TRADING=true

# Enable DEX arbitrage detection
SHIVX_FEATURE_DEX_ARBITRAGE=true

# Enable metacognition and self-reflection
SHIVX_FEATURE_METACOGNITION=true

# Enable guardrails and safety checks - MUST be true in production!
SHIVX_FEATURE_GUARDRAILS=true

# Enable intrusion detection (Guardian Defense) - MUST be true!
SHIVX_FEATURE_GUARDIAN_DEFENSE=true

# ----------------------------------------------------------------------------
# Monitoring & Observability - CRITICAL for production
# ----------------------------------------------------------------------------

# Prometheus metrics port
SHIVX_METRICS_PORT=9090

# Enable metrics collection - MUST be true in production
SHIVX_ENABLE_METRICS=true

# Logging level (INFO or WARNING for production)
SHIVX_LOG_LEVEL=INFO

# Log file path
SHIVX_LOG_FILE=/app/logs/shivx.log

# Log rotation size (in MB)
SHIVX_LOG_MAX_SIZE_MB=100

# Number of log backups to keep
SHIVX_LOG_BACKUP_COUNT=30

# JSON logging - MUST be true for production (for log aggregation)
SHIVX_JSON_LOGGING=true

# Distributed tracing (OpenTelemetry) - Recommended for production
OTEL_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://jaeger:4317
OTEL_SERVICE_NAME=shivx-trading
OTEL_ENVIRONMENT=production

# Sentry DSN for error tracking - CRITICAL for production
SENTRY_DSN=https://REPLACE_WITH_SENTRY_DSN@sentry.io/PROJECT_ID
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ----------------------------------------------------------------------------
# Cloud Provider Configuration (AWS)
# ----------------------------------------------------------------------------

# AWS credentials (preferably use IAM roles instead)
AWS_ACCESS_KEY_ID=LOAD_FROM_IAM_ROLE
AWS_SECRET_ACCESS_KEY=LOAD_FROM_IAM_ROLE
AWS_DEFAULT_REGION=us-east-1

# S3 bucket for backups and model artifacts
AWS_S3_MODEL_BUCKET=shivx-production-models
AWS_S3_BACKUP_BUCKET=shivx-production-backups

# ECS cluster configuration
AWS_ECS_CLUSTER=shivx-production
AWS_ECS_SERVICE=shivx-trading-service

# ----------------------------------------------------------------------------
# Notification & Alerting - CRITICAL
# ----------------------------------------------------------------------------

# Slack webhook for operational notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/REPLACE/WITH/REAL_URL

# Slack channel for critical alerts
SLACK_ALERTS_CHANNEL=#shivx-alerts

# Email configuration for alerts (use SES in production)
SMTP_HOST=email-smtp.us-east-1.amazonaws.com
SMTP_PORT=587
SMTP_USERNAME=REPLACE_WITH_SMTP_USERNAME
SMTP_PASSWORD=REPLACE_WITH_SMTP_PASSWORD
SMTP_FROM_EMAIL=alerts@shivx.io
SMTP_USE_TLS=true

# PagerDuty integration key for CRITICAL alerts
PAGERDUTY_INTEGRATION_KEY=REPLACE_WITH_PAGERDUTY_KEY

# Alert on trading losses above threshold
SHIVX_ALERT_LOSS_THRESHOLD=1000

# Alert on error rate above percentage
SHIVX_ALERT_ERROR_RATE_PCT=1.0

# ----------------------------------------------------------------------------
# External API Keys
# ----------------------------------------------------------------------------

# OpenAI API key (for LLM features) - Optional
OPENAI_API_KEY=sk-REPLACE_WITH_OPENAI_KEY

# Anthropic API key (for Claude integration) - Optional
ANTHROPIC_API_KEY=sk-ant-REPLACE_WITH_ANTHROPIC_KEY

# CoinGecko API key (for market data)
COINGECKO_API_KEY=REPLACE_WITH_COINGECKO_KEY

# Twitter/X API credentials (for sentiment analysis)
TWITTER_API_KEY=REPLACE_WITH_TWITTER_KEY
TWITTER_API_SECRET=REPLACE_WITH_TWITTER_SECRET
TWITTER_BEARER_TOKEN=REPLACE_WITH_TWITTER_BEARER

# ----------------------------------------------------------------------------
# Performance & Resource Limits
# ----------------------------------------------------------------------------

# Maximum concurrent workers
SHIVX_MAX_WORKERS=8

# Request timeout (seconds)
SHIVX_REQUEST_TIMEOUT=30

# Memory limit (in MB, for monitoring)
SHIVX_MEMORY_LIMIT_MB=4096

# CPU limit (number of cores, for monitoring)
SHIVX_CPU_LIMIT=4

# Maximum request body size (MB)
SHIVX_MAX_REQUEST_SIZE_MB=10

# Connection pool size
SHIVX_CONNECTION_POOL_SIZE=50

# ----------------------------------------------------------------------------
# Backup Configuration
# ----------------------------------------------------------------------------

# Enable automated backups
SHIVX_BACKUP_ENABLED=true

# Backup schedule (cron format: daily at 2 AM)
SHIVX_BACKUP_SCHEDULE=0 2 * * *

# Backup retention days
SHIVX_BACKUP_RETENTION_DAYS=30

# Backup storage location (S3 bucket)
SHIVX_BACKUP_STORAGE=s3://shivx-production-backups

# ----------------------------------------------------------------------------
# SSL/TLS Configuration
# ----------------------------------------------------------------------------

# SSL certificate paths (managed by certbot)
SSL_CERT_PATH=/etc/letsencrypt/live/shivx.io/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/shivx.io/privkey.pem

# Minimum TLS version
TLS_MIN_VERSION=1.2

# ----------------------------------------------------------------------------
# Compliance & Audit
# ----------------------------------------------------------------------------

# Enable audit logging
SHIVX_AUDIT_ENABLED=true

# Audit log retention (days)
SHIVX_AUDIT_RETENTION_DAYS=365

# Enable compliance mode (additional validations)
SHIVX_COMPLIANCE_MODE=true

# Data retention policy (days)
SHIVX_DATA_RETENTION_DAYS=90

# ============================================================================
# PRE-DEPLOYMENT SECURITY CHECKLIST - MANDATORY
# ============================================================================
# [ ] SHIVX_SECRET_KEY is at least 32 bytes and randomly generated
# [ ] SHIVX_JWT_SECRET is at least 32 bytes and randomly generated
# [ ] SHIVX_CORS_ORIGINS contains NO wildcards (no *, no 0.0.0.0)
# [ ] SHIVX_ENV is set to 'production'
# [ ] SHIVX_DEV is set to 'false'
# [ ] DEBUG is set to 'false'
# [ ] SKIP_AUTH is set to 'false'
# [ ] SHIVX_TRADING_MODE is 'paper' for initial deployment
# [ ] SHIVX_FEATURE_GUARDRAILS is 'true'
# [ ] SHIVX_FEATURE_GUARDIAN_DEFENSE is 'true'
# [ ] SHIVX_JSON_LOGGING is 'true'
# [ ] SHIVX_ENABLE_METRICS is 'true'
# [ ] Database URL uses sslmode=require
# [ ] All REPLACE_WITH_* placeholders have been filled
# [ ] All passwords are strong and unique
# [ ] Secrets are loaded from secure secret manager
# [ ] Monitoring and alerting are configured
# [ ] Backups are enabled and tested
# [ ] SSL certificates are valid and auto-renewing
# [ ] All external API keys have appropriate rate limits
# [ ] Compliance and audit logging are enabled
# ============================================================================
